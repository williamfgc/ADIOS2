cmake_minimum_required(VERSION 3.6)
project(ADIOS2_MINIMAL C CXX)

include(ExternalProject)

ExternalProject_Add(adios2
  SOURCE_DIR "$ENV{SRC_DIR}"
  INSTALL_DIR "$ENV{PREFIX}"
  CMAKE_GENERATOR "$ENV{CMAKE_GENERATOR}"
  CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
    -DCMAKE_POSITION_INDEPENDENT_CODE=ON
    -DCMAKE_BUILD_TYPE=Release
    -DBUILD_SHARED_LIBS=ON
    -DADIOS2_BUILD_EXAMPLES=OFF
    -DADIOS2_BUILD_TESTING=OFF
    -DADIOS2_USE_Python=ON
    -DPYTHON_EXECUTABLE=$ENV{PYTHON}
    -DADIOS2_USE_Fortran=ON
    -DADIOS2_USE_MPI=ON
    -DADIOS2_USE_SST=OFF
    -DADIOS2_USE_DataMan=OFF
    -DADIOS2_USE_ZeroMQ=OFF
    -DADIOS2_USE_HDF5=OFF
    -DADIOS2_USE_BZip2=OFF
    -DADIOS2_USE_ZFP=OFF
    -DADIOS2_USE_SZ=OFF
    -DADIOS2_USE_MGARD=OFF
)
